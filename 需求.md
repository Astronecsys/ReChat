# 客户端
## 全局变量
1. 当前用户数据包
2. 当前用户房间列表
3. 当前用户所有房间的消息记录
## 欢迎界面
1. 发送登入请求, 接收登入情况
   1. 监听接口
      1. login
   2. 打包好用户数据包
   3. 提示登入情况
      1. 失败
      2. 成功
         1. 跳转到聊天界面
2. 发送注册请求, 接收注册情况
   1. 监听接口
      1. register
   2. 打包好用户数据包
   3. 校验数据合法性
   4. 提示注册情况
      1. 失败
      2. 成功
## 聊天界面
1. 请求加载用户个人信息
   1. 监听接口
      1. getUserInfo
   2. 发送数据
      1. Uid
   3. 接收数据
      1. 用户数据包
   4. 数据可视化
2. 请求加载用户聊天列表
   1. 监听接口
      1. getUtoRList
   2. 发送数据
      1. Uid
   3. 接受数据
      1. 房间数据包数组
   4. 数据可视化
3. 请求加载历史聊天记录
   1. 监听接口
      1. getHistoryMessage
   2. 发送数据
      1. Rid
      2. 当前时间
   3. 接受数据
      1. 消息数据包数组
   4. 数据可视化
4. 请求发送消息
   1. 监听接口
      1. sendMessage
   2. 发送数据
      1. 消息数据包
   3. 接受数据
      1. 发送情况
5. 接受广播
   1. 监听接口
      1. ReceiveMessages
   2. 接收消息数据包
   3. 数据可视化
      1. 处在当前房间, 上屏
      2. 不处在当前房间, 上屏且提示
# 服务端
## 全局变量
1. 在线用户数据包数组
2. IO房间数组
## socket变量
1. 当前链接对应用户数据包
2. 当前用户对应房间数组
## 后台
1. 建立IO房间组
   1. 启动后立即创建
      1. 请求房间列表:数据库查询
      2. 对每个房间分别建立
   2. 当有用户登入后分配房间
      1. 请求用户所属房间列表:数据库查询
      2. 对每个所处房间分别加入
   3. 当有用户登出后退出房间
      1. 请求用户所属房间列表:数据库查询
      2. 对每个所处房间分别退出
## 欢迎界面
1. 接受登入请求, 返回登入情况
   1. 监听接口
      1. login
   2. 账号是否存在--知道全部Uid:数据库查询
   3. 密码是否正确--知道Uid对应的Password:数据库查询
2. 接受注册请求
   1. 监听接口
      1. register
   2. 授予新账号
      1. 分配Uid
      2. 写入数据库
   3. 返回数据
      1. 注册情况
      2. 新注册用户信息
## 聊天界面
1. 接受加载用户个人信息的请求
   1. 监听接口
      1. getUserInfo
   2. 接收数据
      1. Uid
   3. 发送数据
      1. 用户数据包:数据库查询
2. 接受加载用户聊天列表的请求
   1. 监听接口
      1. getUtoRList
   2. 接受数据
      1. Uid
   3. 发送数据
      1. 房间数据包数组:数据库查询
3. 接受加载历史聊天记录的请求
   1. 监听接口
      1. getHistoryMessage
   2. 接受数据
      1. Rid
      2. 当前时间
   3. 发送数据
      1. 消息数据包数组:数据库查询
4. 接受发送消息的请求
   1. 监听接口
      1. sendMessage
   2. 接收数据
      1. 消息数据包
   3. 发送数据
      1. 情况
   4. 广播
      1. 向该数据包的房间(room)所对应的房间(io)广播